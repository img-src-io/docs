---
title: Go SDK
description: "Official Go SDK for img-src"
---

# Go SDK

The official Go SDK for img-src provides idiomatic Go access to the API.

<Info>
  **Package:** `github.com/img-src-io/sdk-go` | **Runtime:** Go 1.22+ | [pkg.go.dev](https://pkg.go.dev/github.com/img-src-io/sdk-go) | [GitHub](https://github.com/img-src-io/sdk-go)
</Info>

## Installation

```bash
go get github.com/img-src-io/sdk-go
```

## Quick Start

```go
package main

import (
    "context"
    "fmt"
    "os"

    sdkgo "github.com/img-src-io/sdk-go"
    "github.com/img-src-io/sdk-go/models/operations"
)

func main() {
    s := sdkgo.New(sdkgo.WithSecurity(os.Getenv("IMGSRC_API_KEY")))

    // Upload an image
    file, _ := os.Open("photo.jpg")
    defer file.Close()

    content, _ := io.ReadAll(file)
    res, err := s.Images.Upload(context.Background(), &operations.UploadImageRequestBody{
        File: &operations.File{
            FileName: "photo.jpg",
            Content:  content,
        },
        TargetPath: sdkgo.String("photos/vacation.jpg"),
    })
    if err != nil {
        panic(err)
    }

    fmt.Println(res.UploadResponse.URL)
    // https://img-src.io/i/username/photos/vacation.jpg
}
```

## Configuration

```go
import (
    "time"

    sdkgo "github.com/img-src-io/sdk-go"
    "github.com/img-src-io/sdk-go/retry"
)

s := sdkgo.New(
    sdkgo.WithSecurity(os.Getenv("IMGSRC_API_KEY")),
    sdkgo.WithServerURL("https://api.img-src.io"),
    sdkgo.WithTimeout(30*time.Second),
    sdkgo.WithRetryConfig(retry.Config{
        Strategy: "backoff",
        Backoff: &retry.BackoffStrategy{
            InitialInterval: 500,
            MaxInterval:     60000,
            MaxElapsedTime:  300000,
            Exponent:        1.5,
        },
    }),
)
```

## Images

### Upload

```go
import (
    "io"
    "os"

    sdkgo "github.com/img-src-io/sdk-go"
    "github.com/img-src-io/sdk-go/models/operations"
)

// From file
file, _ := os.Open("photo.jpg")
defer file.Close()
content, _ := io.ReadAll(file)

res, err := s.Images.Upload(ctx, &operations.UploadImageRequestBody{
    File: &operations.File{
        FileName: "photo.jpg",
        Content:  content,
    },
    TargetPath: sdkgo.String("photos/vacation.jpg"),
})

// With visibility (Pro)
res, err := s.Images.Upload(ctx, &operations.UploadImageRequestBody{
    File: &operations.File{
        FileName: "photo.jpg",
        Content:  content,
    },
    TargetPath: sdkgo.String("photos/private.jpg"),
    Visibility: (*components.Visibility)(sdkgo.String("private")),
})
```

### List

```go
// List all images (default limit: 50)
res, err := s.Images.List(ctx, nil, nil, nil)
for _, image := range res.ImageListResponse.Images {
    fmt.Println(image.URL)
}

// With pagination
res, err := s.Images.List(ctx, sdkgo.Int64(20), sdkgo.Int64(40), nil)

// Filter by path prefix
res, err := s.Images.List(ctx, sdkgo.Int64(50), nil, sdkgo.String("photos/"))
```

### Search

```go
res, err := s.Images.Search(ctx, "vacation", sdkgo.Int64(10))
for _, result := range res.SearchResponse.Results {
    fmt.Println(result.Paths)
}
```

### Get

```go
res, err := s.Images.GetMetadata(ctx, "img_abc123")
fmt.Printf("Dimensions: %dx%d\n",
    res.MetadataResponse.Metadata.Width,
    res.MetadataResponse.Metadata.Height)
```

### Delete

```go
_, err := s.Images.Delete(ctx, "img_abc123")
```

### Create Signed URL (Pro)

```go
import "github.com/img-src-io/sdk-go/models/components"

res, err := s.Images.CreateSignedURL(ctx, "img_abc123", &components.CreateSignedURLRequest{
    ExpiresInSeconds: sdkgo.Int64(3600), // 1 hour (default)
})
fmt.Println(res.SignedURLResponse.SignedURL)
```

### Update Visibility (Pro)

```go
import "github.com/img-src-io/sdk-go/models/components"

_, err := s.Images.UpdateVisibility(ctx, "img_abc123", components.UpdateVisibilityRequest{
    Visibility: components.VisibilityPrivate,
})
```

### Delete Image Path

```go
res, err := s.Images.DeletePath(ctx, "username", "photos/old-photo.jpg")
fmt.Println(res.PathDeleteResponse.ImageDeleted) // true if last path removed
```

## Settings

```go
import "github.com/img-src-io/sdk-go/models/components"

// Get settings
res, err := s.Settings.Get(ctx)
fmt.Println(res.SettingsResponse.Settings.DefaultQuality)

// Update settings
_, err = s.Settings.Update(ctx, &components.UpdateSettingsRequest{
    DefaultQuality: sdkgo.Int64(85),
    DefaultFitMode: sdkgo.String("cover"),
    DeliveryFormats: []string{"webp", "jpeg"},
})
```

## Presets (Pro)

```go
import "github.com/img-src-io/sdk-go/models/components"

// List presets
res, err := s.Presets.ListPresets(ctx)

// Create preset
preset, err := s.Presets.CreatePreset(ctx, &components.CreatePresetRequest{
    Name: "thumbnail",
    Params: map[string]any{
        "w":   200,
        "h":   200,
        "fit": "cover",
    },
})

// Get preset
preset, err := s.Presets.GetPreset(ctx, "preset_id")

// Update preset
_, err = s.Presets.UpdatePreset(ctx, "preset_id", &components.UpdatePresetRequest{
    Params: map[string]any{
        "w":   250,
        "h":   250,
        "fit": "cover",
    },
})

// Delete preset
_, err = s.Presets.DeletePreset(ctx, "preset_id")
```

## Usage

```go
res, err := s.Usage.Get(ctx)

fmt.Printf("Plan: %s\n", res.UsageResponse.PlanName)
fmt.Printf("Storage: %.2f MB\n", res.UsageResponse.StorageUsedMB)
fmt.Printf("Uploads this period: %d\n", res.UsageResponse.CurrentPeriod.Uploads)
```

## Error Handling

```go
import (
    "errors"

    "github.com/img-src-io/sdk-go/models/apierrors"
)

res, err := s.Images.GetMetadata(ctx, "nonexistent")
if err != nil {
    var apiErr *apierrors.APIError
    var errResp *apierrors.ErrorResponse

    switch {
    case errors.As(err, &errResp):
        fmt.Printf("API error: %s\n", errResp.Error_.Message)
    case errors.As(err, &apiErr):
        fmt.Printf("HTTP %d: %s\n", apiErr.StatusCode, apiErr.Body)
    default:
        fmt.Printf("Error: %v\n", err)
    }
}
```

## Context and Cancellation

All methods accept a context for cancellation and timeouts:

```go
// With timeout
ctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)
defer cancel()

res, err := s.Images.GetMetadata(ctx, "img_abc123")
```

## Concurrent Uploads

```go
import (
    "context"
    "io"
    "os"
    "path/filepath"
    "sync"

    sdkgo "github.com/img-src-io/sdk-go"
    "github.com/img-src-io/sdk-go/models/operations"
)

func uploadImages(s *sdkgo.Imgsrc, paths []string) ([]string, error) {
    var (
        wg      sync.WaitGroup
        mu      sync.Mutex
        urls    []string
        errored error
    )

    for _, path := range paths {
        wg.Add(1)
        go func(p string) {
            defer wg.Done()

            data, err := os.ReadFile(p)
            if err != nil {
                mu.Lock()
                errored = err
                mu.Unlock()
                return
            }

            res, err := s.Images.Upload(context.Background(), &operations.UploadImageRequestBody{
                File: &operations.File{
                    FileName: filepath.Base(p),
                    Content:  data,
                },
                TargetPath: sdkgo.String("batch/" + filepath.Base(p)),
            })
            if err != nil {
                mu.Lock()
                errored = err
                mu.Unlock()
                return
            }

            mu.Lock()
            urls = append(urls, res.UploadResponse.URL)
            mu.Unlock()
        }(path)
    }

    wg.Wait()
    return urls, errored
}
```

## HTTP Handler Example

```go
package main

import (
    "encoding/json"
    "io"
    "net/http"
    "os"

    sdkgo "github.com/img-src-io/sdk-go"
    "github.com/img-src-io/sdk-go/models/operations"
)

var s = sdkgo.New(sdkgo.WithSecurity(os.Getenv("IMGSRC_API_KEY")))

func uploadHandler(w http.ResponseWriter, r *http.Request) {
    if r.Method != http.MethodPost {
        http.Error(w, "Method not allowed", http.StatusMethodNotAllowed)
        return
    }

    file, header, err := r.FormFile("file")
    if err != nil {
        http.Error(w, err.Error(), http.StatusBadRequest)
        return
    }
    defer file.Close()

    content, _ := io.ReadAll(file)
    res, err := s.Images.Upload(r.Context(), &operations.UploadImageRequestBody{
        File: &operations.File{
            FileName: header.Filename,
            Content:  content,
        },
        TargetPath: sdkgo.String("uploads/" + header.Filename),
    })
    if err != nil {
        http.Error(w, err.Error(), http.StatusInternalServerError)
        return
    }

    w.Header().Set("Content-Type", "application/json")
    json.NewEncoder(w).Encode(res.UploadResponse)
}

func main() {
    http.HandleFunc("/upload", uploadHandler)
    http.ListenAndServe(":8080", nil)
}
```

## Related

- [API Reference](/api-reference/overview) - Full API documentation
- [Image Transformation Guide](/guides/image-transformation) - Transformation parameters
- [Go Integration Examples](/examples/go) - More Go examples with popular frameworks
