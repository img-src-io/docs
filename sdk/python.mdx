---
title: Python SDK
description: "Official Python SDK for img-src"
---

# Python SDK

The official Python SDK for img-src provides a simple, Pythonic interface to the API.

<Info>
  **Package:** `img-src` | **Runtime:** Python 3.9.2+ | [PyPI](https://pypi.org/project/img-src/) | [GitHub](https://github.com/img-src-io/sdk-python)
</Info>

## Installation

```bash
pip install img-src
```

## Quick Start

```python
import os
from img_src import Imgsrc, models

client = Imgsrc(bearer_auth=os.environ["IMGSRC_API_KEY"])

# Upload an image
with open("photo.jpg", "rb") as f:
    res = client.images.upload_image(request=models.UploadImageRequestBody(
        file=models.File(
            file_name="photo.jpg",
            content=f.read(),
        ),
        target_path="photos/vacation.jpg",
    ))

print(res.upload_response.url)
# https://img-src.io/i/username/photos/vacation.jpg
```

## Configuration

```python
from img_src import Imgsrc
from img_src.utils import RetryConfig, BackoffStrategy

client = Imgsrc(
    # Required
    bearer_auth="imgsrc_YOUR_API_KEY",

    # Optional
    server_url="https://api.img-src.io",  # Default
    timeout_ms=30000,  # Request timeout in ms
    retry_config=RetryConfig(
        "backoff",
        BackoffStrategy(
            initial_interval=500,
            max_interval=60000,
            max_elapsed_time=300000,
            exponent=1.5,
        ),
    ),
)
```

### Environment Variables

```python
import os
from img_src import Imgsrc

client = Imgsrc(bearer_auth=os.environ["IMGSRC_API_KEY"])
```

## Images

### Upload

```python
from img_src import models

# From file
with open("photo.jpg", "rb") as f:
    res = client.images.upload_image(request=models.UploadImageRequestBody(
        file=models.File(
            file_name="photo.jpg",
            content=f.read(),
        ),
        target_path="photos/vacation.jpg",
    ))

# From bytes
image_bytes = open("photo.jpg", "rb").read()
res = client.images.upload_image(request=models.UploadImageRequestBody(
    file=models.File(
        file_name="photo.jpg",
        content=image_bytes,
    ),
    target_path="photos/vacation.jpg",
))

# With visibility (Pro)
res = client.images.upload_image(request=models.UploadImageRequestBody(
    file=models.File(file_name="photo.jpg", content=image_bytes),
    target_path="photos/private.jpg",
    visibility="private",
))
```

### List

```python
# List all images (default limit: 50)
res = client.images.list_images()
for image in res.image_list_response.images:
    print(image.url)

# With pagination
res = client.images.list_images(limit=20, offset=40)

# Filter by path prefix
res = client.images.list_images(path="photos/")

# Auto-pagination with next()
res = client.images.list_images(limit=20)
while res is not None:
    for image in res.image_list_response.images:
        print(image.url)
    res = res.next()
```

### Search

```python
res = client.images.search_images(q="vacation", limit=10)
for result in res.search_response.results:
    print(result.paths)
```

### Get

```python
res = client.images.get_image(id="img_abc123")
print(f"Dimensions: {res.metadata_response.metadata.width}x{res.metadata_response.metadata.height}")
```

### Delete

```python
res = client.images.delete_image(id="img_abc123")
print(res.delete_response.success)        # True
print(res.delete_response.deleted_paths)  # ["photos/vacation.jpg"]
```

### Create Signed URL (Pro)

```python
res = client.images.create_signed_url(
    id="img_abc123",
    expires_in_seconds=3600,  # 1 hour (default)
)
print(res.signed_url_response.signed_url)

# With transformation parameters
res = client.images.create_signed_url(
    id="img_abc123",
    expires_in_seconds=3600,
    transformation=models.Transformation(
        width=800,
        height=600,
        fit="cover",
        quality=85,
    ),
)
print(res.signed_url_response.signed_url)
```

### Update Visibility (Pro)

```python
res = client.images.update_visibility(id="img_abc123", visibility="private")
print(res.update_visibility_response.visibility)  # "private"
```

### Delete Image Path

```python
res = client.images.delete_image_path(username="username", filepath="photos/old-photo.jpg")
print(res.path_delete_response.image_deleted)  # True if last path removed
```

## Settings

```python
# Get settings
res = client.settings.get_settings()
print(res.settings_response.settings.default_quality)

# Update settings
res = client.settings.update_settings(request=models.UpdateSettingsRequest(
    default_quality=85,
    default_fit_mode="cover",
    delivery_formats=["webp", "jpeg"],
))
print(res.settings_update_response.message)  # "Settings updated successfully"
```

## Presets (Pro)

```python
from img_src import models

# List presets
res = client.presets.list_presets()
for preset in res.list_presets_response.presets:
    print(f"{preset.name}: {preset.params}")

# Create preset
res = client.presets.create_preset(request=models.CreatePresetRequest(
    name="thumbnail",
    params={"w": 200, "h": 200, "fit": "cover"},
))
print(res.preset.name)  # "thumbnail"

# Get preset
res = client.presets.get_preset(id="preset_id")
print(res.preset.name)

# Update preset
res = client.presets.update_preset(
    id="preset_id",
    params={"w": 250, "h": 250, "fit": "cover"},
)
print(res.preset.name)

# Delete preset
res = client.presets.delete_preset(name="thumbnail")
print(res.delete_preset_response.message)  # "Preset deleted successfully"
```

## Usage

```python
res = client.usage.get_usage()

print(f"Plan: {res.usage_response.plan_name}")
print(f"Storage: {res.usage_response.storage_used_mb} MB")
print(f"Uploads this period: {res.usage_response.current_period.uploads}")
```

## Error Handling

```python
from img_src.errors import ErrorResponse, ImgsrcDefaultError, ImgsrcError

try:
    client.images.get_image(id="nonexistent")
except ErrorResponse as e:
    # Structured API error (e.g., 401, 403, 404)
    print(f"Code: {e.data.error.code}")       # "NOT_FOUND"
    print(f"Message: {e.data.error.message}")  # "Image not found"
    print(f"Status: {e.data.error.status}")    # 404
except ImgsrcDefaultError as e:
    # Unstructured HTTP error (non-JSON response)
    print(f"HTTP error: {e.status_code}")
    print(f"Body: {e.body}")
except ImgsrcError as e:
    # Base SDK error (catch-all for API errors)
    print(f"SDK error: {e}")
except Exception as e:
    print(f"Unexpected error: {e}")
```

## Async Support

The SDK provides async variants of all methods using the `_async` suffix:

```python
import asyncio
from img_src import Imgsrc, models

async def main():
    client = Imgsrc(bearer_auth="imgsrc_YOUR_API_KEY")

    # Upload (async)
    with open("photo.jpg", "rb") as f:
        res = await client.images.upload_image_async(
            request=models.UploadImageRequestBody(
                file=models.File(file_name="photo.jpg", content=f.read()),
                target_path="photos/vacation.jpg",
            )
        )

    # List (async)
    res = await client.images.list_images_async()

    # Search (async)
    res = await client.images.search_images_async(q="vacation")

asyncio.run(main())
```

### Async Context Manager

```python
async with Imgsrc(bearer_auth="imgsrc_YOUR_API_KEY") as client:
    res = await client.images.get_image_async(id="img_abc123")
```

## Framework Examples

### FastAPI

```python
from fastapi import FastAPI, UploadFile
from img_src import Imgsrc, models
import os

app = FastAPI()
client = Imgsrc(bearer_auth=os.environ["IMGSRC_API_KEY"])

@app.post("/upload")
async def upload(file: UploadFile):
    content = await file.read()
    res = await client.images.upload_image_async(
        request=models.UploadImageRequestBody(
            file=models.File(
                file_name=file.filename,
                content=content,
            ),
            target_path=f"uploads/{file.filename}",
        )
    )
    return {"url": res.upload_response.url}
```

### Django

```python
# views.py
from django.http import JsonResponse
from django.views.decorators.csrf import csrf_exempt
from django.conf import settings
from img_src import Imgsrc, models

client = Imgsrc(bearer_auth=settings.IMGSRC_API_KEY)

@csrf_exempt
def upload(request):
    if request.method == "POST":
        file = request.FILES["file"]
        res = client.images.upload_image(
            request=models.UploadImageRequestBody(
                file=models.File(
                    file_name=file.name,
                    content=file.read(),
                ),
                target_path=f"uploads/{file.name}",
            )
        )
        return JsonResponse({"url": res.upload_response.url})
```

### Flask

```python
from flask import Flask, request, jsonify
from img_src import Imgsrc, models

app = Flask(__name__)
client = Imgsrc(bearer_auth="imgsrc_YOUR_API_KEY")

@app.route("/upload", methods=["POST"])
def upload():
    file = request.files["file"]
    res = client.images.upload_image(
        request=models.UploadImageRequestBody(
            file=models.File(
                file_name=file.filename,
                content=file.read(),
            ),
            target_path=f"uploads/{file.filename}",
        )
    )
    return jsonify({"url": res.upload_response.url})
```

## Type Hints

The SDK includes full type hints for IDE support:

```python
from img_src import models

# Wrapper types (returned by SDK methods, include http_meta)
from img_src.models import (
    UploadImageResponse,
    ListImagesResponse,
    GetImageResponse,
    DeleteImageResponse,
    CreateSignedURLResponse,
    UpdateVisibilityResponse1,
    DeleteImagePathResponse,
    SearchImagesResponse,
)

# Inner component types (data models)
from img_src.models import (
    UploadResponse,
    ImageListResponse,
    SearchResponse,
    MetadataResponse,
    ImageMetadata,
    DeleteResponse,
    SignedURLResponse,
    UpdateVisibilityResponse,
    PathDeleteResponse,
    SettingsResponse,
    SettingsUpdateResponse,
    ListPresetsResponse,
    DeletePresetResponse,
    Preset,
    UsageResponse,
    PlanLimits,
    CurrentPeriod,
    Credits,
    HTTPMetadata,
    Transformation,
)

# Error types
from img_src.errors import (
    ErrorResponse,
    ImgsrcDefaultError,
    ImgsrcError,
)
```

## Related

- [API Reference](/api-reference/overview) - Full API documentation
- [Image Transformation Guide](/guides/image-transformation) - Transformation parameters
- [Authentication Guide](/guides/authentication) - API key management
