---
title: TypeScript SDK
description: "Official TypeScript/JavaScript SDK for img-src"
---

# TypeScript SDK

The official TypeScript SDK for img-src provides type-safe access to the API with full autocompletion support.

<Info>
  **Package:** `@img-src/sdk` | **Runtime:** Node.js 18+ | [npm](https://www.npmjs.com/package/@img-src/sdk) | [GitHub](https://github.com/img-src-io/sdk-typescript)
</Info>

## Installation

<CodeGroup>

```bash npm
npm install @img-src/sdk
```

```bash pnpm
pnpm add @img-src/sdk
```

```bash yarn
yarn add @img-src/sdk
```

</CodeGroup>

## Quick Start

```typescript
import { Imgsrc } from "@img-src/sdk";
import fs from "fs";

const client = new Imgsrc({
  bearerAuth: process.env.IMGSRC_API_KEY,
});

// Upload an image
const { uploadResponse } = await client.images.uploadImage({
  file: {
    fileName: "photo.jpg",
    content: fs.readFileSync("photo.jpg"),
  },
  targetPath: "photos/vacation.jpg",
});

console.log(uploadResponse?.url);
// https://img-src.io/i/username/photos/vacation.jpg
```

## Configuration

```typescript
import { Imgsrc } from "@img-src/sdk";

const client = new Imgsrc({
  // Required
  bearerAuth: "imgsrc_YOUR_API_KEY",

  // Optional
  serverURL: "https://api.img-src.io", // Default
  timeoutMs: 30000, // Request timeout in ms
  retryConfig: {
    strategy: "backoff",
    backoff: {
      initialInterval: 500,
      maxInterval: 60000,
      maxElapsedTime: 300000,
      exponent: 1.5,
    },
    retryConnectionErrors: true,
  },
});
```

## Images

### Upload

```typescript
import fs from "fs";

// From file
const { uploadResponse } = await client.images.uploadImage({
  file: {
    fileName: "photo.jpg",
    content: fs.readFileSync("photo.jpg"),
  },
  targetPath: "photos/vacation.jpg",
});

// From a Blob
const blob = new Blob([fs.readFileSync("photo.jpg")]);
const { uploadResponse: res } = await client.images.uploadImage({
  file: blob,
  targetPath: "photos/vacation.jpg",
});

// With visibility (Pro)
const { uploadResponse: privateImg } = await client.images.uploadImage({
  file: blob,
  targetPath: "photos/private.jpg",
  visibility: "private",
});
```

### List

```typescript
// List all images (default limit: 50)
const { imageListResponse } = await client.images.listImages();
for (const image of imageListResponse?.images ?? []) {
  console.log(image.url);
}

// With pagination
const { imageListResponse: page } = await client.images.listImages(20, 40);

// Filter by path prefix
const { imageListResponse: photos } = await client.images.listImages(
  50,
  undefined,
  "photos/"
);
```

### Search

```typescript
const { searchResponse } = await client.images.searchImages("vacation", 10);
for (const result of searchResponse?.results ?? []) {
  console.log(result.paths);
}
```

### Get

```typescript
const { metadataResponse } = await client.images.getImage("img_abc123");
console.log(metadataResponse?.metadata?.width, metadataResponse?.metadata?.height);
```

### Delete

```typescript
await client.images.deleteImage("img_abc123");
```

### Create Signed URL (Pro)

```typescript
const { signedUrlResponse } = await client.images.createSignedUrl("img_abc123", {
  expiresInSeconds: 3600, // 1 hour (default)
});
console.log(signedUrlResponse?.signedUrl);
```

### Update Visibility (Pro)

```typescript
await client.images.updateImageVisibility("img_abc123", {
  visibility: "private",
});
```

### Delete Image Path

```typescript
const { pathDeleteResponse } = await client.images.deleteImagePath(
  "username",
  "photos/old-photo.jpg"
);
console.log(pathDeleteResponse?.imageDeleted); // true if last path removed
```

## Settings

```typescript
// Get settings
const { settingsResponse } = await client.settings.getSettings();
console.log(settingsResponse?.settings?.defaultQuality);

// Update settings
await client.settings.updateSettings({
  defaultQuality: 85,
  defaultFitMode: "cover",
  deliveryFormats: ["webp", "jpeg"],
});
```

## Presets (Pro)

```typescript
// List presets
const { listPresetsResponse } = await client.presets.listPresets();

// Create preset
const { preset } = await client.presets.createPreset({
  name: "thumbnail",
  params: { w: 200, h: 200, fit: "cover" },
});

// Get preset
const { preset: fetched } = await client.presets.getPreset("preset_id");

// Update preset
await client.presets.updatePreset("preset_id", {
  params: { w: 250, h: 250, fit: "cover" },
});

// Delete preset
await client.presets.deletePreset("preset_id");
```

## Usage

```typescript
const { usageResponse } = await client.usage.getUsage();

console.log(`Plan: ${usageResponse?.planName}`);
console.log(`Storage: ${usageResponse?.storageUsedMb} MB`);
console.log(`Uploads this period: ${usageResponse?.currentPeriod?.uploads}`);
```

## Error Handling

```typescript
import { Imgsrc } from "@img-src/sdk";
import * as errors from "@img-src/sdk/models/errors";

try {
  await client.images.getImage("nonexistent");
} catch (error) {
  if (error instanceof errors.ImgsrcError) {
    console.log(`API error: ${error.httpMeta.response.status}`);
    console.log(`Body: ${error.httpMeta.body}`);
  } else if (error instanceof errors.SDKValidationError) {
    console.log(`Validation error: ${error.pretty()}`);
  } else if (error instanceof errors.ConnectionError) {
    console.log("Connection failed");
  } else if (error instanceof errors.RequestTimeoutError) {
    console.log("Request timed out");
  }
}
```

## TypeScript Types

Types are exported from dedicated modules:

```typescript
// Component types (request/response bodies)
import type {
  UploadResponse,
  ImageMetadata,
  SearchResponse,
  CreateSignedUrlRequest,
  UpdateVisibilityRequest,
  UpdateSettingsRequest,
  CreatePresetRequest,
  Preset,
  UsageResponse,
} from "@img-src/sdk/models/components";

// Operation types (request params, full responses)
import type {
  UploadImageRequestBody,
  UploadImageResponse,
  ListImagesResponse,
  SearchImagesResponse,
} from "@img-src/sdk/models/operations";
```

## Framework Examples

### Next.js

```typescript
// app/api/upload/route.ts
import { Imgsrc } from "@img-src/sdk";
import { NextResponse } from "next/server";

const client = new Imgsrc({ bearerAuth: process.env.IMGSRC_API_KEY! });

export async function POST(request: Request) {
  const formData = await request.formData();
  const file = formData.get("file") as File;

  const { uploadResponse } = await client.images.uploadImage({
    file: new Blob([await file.arrayBuffer()]),
    targetPath: `uploads/${file.name}`,
  });

  return NextResponse.json(uploadResponse);
}
```

### Express

```typescript
import express from "express";
import multer from "multer";
import { Imgsrc } from "@img-src/sdk";

const app = express();
const upload = multer();
const client = new Imgsrc({ bearerAuth: process.env.IMGSRC_API_KEY! });

app.post("/upload", upload.single("file"), async (req, res) => {
  const { uploadResponse } = await client.images.uploadImage({
    file: new Blob([req.file!.buffer]),
    targetPath: `uploads/${req.file!.originalname}`,
  });

  res.json(uploadResponse);
});
```

## Browser Usage

<Warning>
  Never expose your API key in client-side code. Use a backend proxy.
</Warning>

The SDK is designed for server-side use. For client-side applications, create a backend API endpoint that proxies requests.

## Related

- [API Reference](/api-reference/overview) - Full API documentation
- [Image Transformation Guide](/guides/image-transformation) - Transformation parameters
- [React Integration](/examples/react) - Using img-src with React
- [Next.js Integration](/examples/nextjs) - Using img-src with Next.js
